---
import { getCollection } from 'astro:content';
import PageLayout from '../layouts/PageLayout.astro';
import PostCard from '../components/PostCard.astro';

// 動画紹介カテゴリの記事を取得
const allPosts = await getCollection('posts', ({ data }) => !data.draft);
const tutorialPosts = allPosts
  .filter((post) => post.data.tags.includes('動画') || post.data.tags.includes('講座'))
  .sort((a, b) => b.data.publishedAt.valueOf() - a.data.publishedAt.valueOf());
---

<PageLayout
  title="麻雀教則動画"
  description="麻雀を学ぶための動画やチャンネルについての紹介記事"
>
  <div class="intro">
    <p>
      麻雀を学ぶための動画やチャンネルについての紹介記事です。
      初心者から中級者まで、レベルに合わせた学習コンテンツを紹介しています。
    </p>
  </div>

  {tutorialPosts.length > 0 ? (
    <div class="posts-list">
      {tutorialPosts.map((post) => (
        <PostCard post={post} />
      ))}
    </div>
  ) : (
    <p class="no-posts">現在、教則動画の記事はありません。</p>
  )}
</PageLayout>

<style>
  .intro {
    margin-bottom: 32px;
    padding: 20px;
    background: var(--color-bg-secondary);
    border-radius: 8px;
    line-height: 1.8;
  }

  .posts-list {
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    overflow: hidden;
  }

  .no-posts {
    color: var(--color-text-tertiary);
    text-align: center;
    padding: 40px;
  }
</style>
